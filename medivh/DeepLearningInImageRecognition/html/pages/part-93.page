<div id="pf5d" class="pf w0 h0" data-page-no="5d"><div class="pc pc5d w0 h0"><img class="bi x82 y705 w4 h41" alt="" src="data:image/png;base64,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AFCNAACoRgAAVCMAAKoRAADVCAAAqhEAANUIAIBqBABANQIAoBoBAFCNAACoRgAAVCMAAKhGAABUIwAAqhEAANUIAIBqBABANQIAoBoBAEA1AgCgGgEAUI0AAKhGAABUIwAAqhEAANUIAIBqBAAA1QgAgGoEAEA1AgCgGgEAUI0AAKhGAABUIwAAqhEAAFQjAACqEQAA1QgAgGoEAEA1AgCgGgEAUI0AAKAaAQBQjQAAqEYAAFQjAACqEQAA1QgAgGoEAEA1AgCAagQAQDUCAKAaAQBQjQAAqEYAAFQjAACqEQAAVCMAAKoRAADVCACAagQAQDUCAKAaAQBQjQAAqEYAAFCNAACoRgAAVCMAAKoRAADVCACAagQAQDUCAKAaAQBANQIAoBoBAFCNAACoRgAAVCMAAKoRAADVCAAAqhEAANUIAIBqBABANQIAoBoBAFCNAACoRgAAVCMAAKhGAABUIwAAqhEAANUIAIBqBABANQIAoBoBAEA1AgCgGgEAUI0AAKhGAABUIwAAqhEAANUIAIBqBAAA1QgAgGoEAEA1AgCgGgEAUI0AAKhGAABUIwAAqEYAAFQjAACqEQAA1QgAgGoEAEA1AgCgGgEAUI0AAKAaAQBQjQAAqEYAAFQjAACqEQAA1QgAgGoEAEA1AgCAagQAQDUCAKAaAQBQjQAAqEYAAFQjAACqEQAAVCMAAKoRAADVCACAagQAQDUCAKAaAQBQjQAAqEYAAFCNAACoRgAAVCMAAKoRAADVCACAagQAQDUCAIBqBABANQIAoBoBAFCNAACoRgAAVCMAAKoRAADVCAAAqhEAANUIAIBqBABANQIAoBoBAFCNAACoRgAAVCMAAKhGAABUIwAAqhEAANUIAIBqBABANQIAoBoBAEA1AgCgGgEAUI0AAKhGAABUIwAAqhEAANUIAIBqBAAA1QgAgGoEAEA1AgCgGgEAUI0AAKhGAABUIwAAqEYAAFQjAACqEQAA1QgAgGoEAEA1AgCgGgEAUI0AAKAaAQBQjQAAqEYAAFQjAACqEQAA1QgAgGoEAEA1AgCAagQAQDUCAKAaAQBQjQAAqEYAAFQjAACqEQAAVCMAAKoRAADVCACAagQAQDUCAKAaAQBQjQAAqEYAAFCNAACoRgAAVCMAAKoRAADVCACAagQAQDUCAIBqBABANQIAoBoBAFCNAACoRgAAVCMAAKoRAADVCAAAqhEAANUIAIBqBABANQIAoBoBAFCNAACoRgAAUI0AAKhGAABUIwAAqhEAANUIAIBqBABANQIAoBoBAEA1AgCgGgEAUI0AAKhGAABUIwAAqhEAANUIAIBqBAAA1QgAgGoEAEA1AgCgGgEAUI0AAKhGAABUIwAAqEYAAFQjAACqEQAA1QgAgGoEAEA1AgCgGgEAUI0AAKAaAQBQjQAAqEYAAFQjAACqEQAA1QgAgGoEAADVCACAagQAQDUCAKAaAQBQjQAAqEYAAFQjAACqEQAAVCMAAKoRAADVCACAagQAQDUCAKAaAQBQjQAAqEYAAFCNAACoRgAAVCMAAKoRAADVCACAagQAQDUCAIBqBABANQIAoBoBAFCNAACoRgAAVCMAAKoRAADVCAAAqhEAANUIAIBqBABANQIAoBoBAFCNAACoRgAAUI0AAKhGAABUIwAAqhEAANUIAIBqBABANQIAoBoBAEA1AgCgGgEAUI0AAKhGAABUIwAAqhEAANUIAIBqBAAA1QgAgGoEAEA1AgCgGgEAUI0AAKhGAABUIwAAqEYAAFQjAACqEQAA1QgAgGoEAEA1AgCgGgEAUI0AAKAaAQBQjQAAqEYAAFQjAACqEQAA1QgAgGoEAADVCACAagQAQDUCAKAaAQBQjQAAqEYAAFQjAACqEQAAVCMAAKoRAADVCACAagQAQDUCAKAaAQBQjQAAoBoBAFCNAACoRgAAVCMAAKoRAADVCACAagQAQDUCAIBqBABANQIAoBoBAFCNAACoRgAAVCMAAKoRAADVCAAAqhEAANUIAIBqBABANQIAoBoBAFCNAACoRgAAUI0AAMyr3dOIMBrYocw0BAC6vgBexIUXJqyaWwAAAABJRU5ErkJggg=="/><div class="t m0 x8 h9 ye ff2 fs6 fc0 sc0 ls0 ws0">哈尔滨工业大学本科毕业设计（论文）</div><div class="t m0 x7 h2 ya4 ff2 fs1 fc0 sc0 ls0 ws0">程中，<span class="_ _14"></span>只需<span class="_ _14"></span>要<span class="_ _14"></span>在代<span class="_ _14"></span>码<span class="_ _14"></span>中开<span class="_ _14"></span>辟线<span class="_ _14"></span>程<span class="_ _14"></span>即可。<span class="_ _14"></span>这个<span class="_ _14"></span>机制<span class="_ _14"></span>使<span class="_ _14"></span>得硬<span class="_ _14"></span>件升<span class="_ _14"></span>级<span class="_ _14"></span>扩展<span class="_ _14"></span>变得<span class="_ _14"></span>简<span class="_ _14"></span>单，因</div><div class="t m0 x7 h2 ya5 ff2 fs1 fc0 sc0 ls0 ws0">为虚<span class="_ _14"></span>拟<span class="_ _14"></span>的线<span class="_ _14"></span>程<span class="_ _14"></span>与实<span class="_ _14"></span>际调<span class="_ _14"></span>度<span class="_ _14"></span>的线<span class="_ _14"></span>程是<span class="_ _14"></span>分<span class="_ _14"></span>离的，<span class="_ _14"></span><span class="ff3">GPU</span>为我<span class="_ _14"></span>们<span class="_ _14"></span>自动<span class="_ _14"></span>调度，<span class="_ _14"></span>我<span class="_ _14"></span>们可<span class="_ _14"></span>以随<span class="_ _14"></span>意</div><div class="t m0 x7 h2 ya6 ff2 fs1 fc0 sc0 ls0 ws0">的更换未来更多核心的<span class="ff3">GPU</span>而不需要改动我们的代码。</div><div class="t m0 xa h2 ya7 ff2 fs1 fc0 sc0 ls0 ws0">为了<span class="_ _14"></span>更<span class="_ _14"></span>好地<span class="_ _14"></span>理<span class="_ _14"></span>解线<span class="_ _14"></span>程<span class="_ _14"></span>块与<span class="_ _14"></span>线<span class="_ _14"></span>程的<span class="_ _14"></span>概<span class="_ _14"></span>念，我<span class="_ _14"></span>们<span class="_ _14"></span>举一<span class="_ _14"></span>个<span class="ff3">GPU</span>中实<span class="_ _14"></span>现<span class="_ _14"></span>两个<span class="_ _14"></span>向<span class="_ _14"></span>量相<span class="_ _14"></span>加</div><div class="t m0 x7 h2 ya8 ff2 fs1 fc0 sc0 ls0 ws0">的例子，如代码<span class="ff3">8.1</span>所示</div><div class="t m0 x55 h16 yd6d ff2 fsb fc0 sc0 ls0 ws0">代码<span class="_ _1f"> </span><span class="ff3">8.1<span class="_ _1d"> </span></span>向量加法内核函数</div><div class="t m0 x113 h12 y780 ff3 fs1 fc0 sc0 ls0 ws0">1<span class="_ _82"> </span>g<span class="_ _17"> </span>l<span class="_ _17"> </span>o<span class="_ _17"> </span>b<span class="_ _17"> </span>a<span class="_ _17"> </span>l<span class="_ _4"> </span><span class="ff5">v<span class="_ _13"></span>o<span class="_ _26"> </span>i<span class="_ _13"></span>d<span class="_ _23"> </span></span>a<span class="_ _3"></span>d<span class="_ _3"></span>d<span class="_ _19"> </span>(<span class="_ _1c"> </span><span class="ff5">i<span class="_ _1"> </span>n<span class="_ _1"> </span>t<span class="_ _23"> </span><span class="ff8">∗<span class="_ _26"></span></span></span>c<span class="_ _1a"> </span>,<span class="_ _83"> </span><span class="ff5">i<span class="_ _1"> </span>n<span class="_ _26"> </span>t<span class="_ _84"> </span><span class="ff8">∗<span class="_ _13"></span></span></span>a<span class="_ _1c"> </span>,<span class="_ _83"> </span><span class="ff5">i<span class="_ _26"> </span>n<span class="_ _1"> </span>t<span class="_ _84"> </span><span class="ff8">∗<span class="_ _13"></span></span></span>b<span class="_ _19"> </span>)<span class="_ _17"> </span><span class="ff8">{</span></div><div class="t m0 x113 he y25c ff3 fs1 fc0 sc0 ls0 ws0">2<span class="_ _85"> </span><span class="ff5">i<span class="_ _1"> </span>n<span class="_ _26"> </span>t<span class="_ _83"> </span></span>t<span class="_ _17"> </span>i<span class="_ _17"> </span>d<span class="_ _86"> </span><span class="ff6">=<span class="_ _87"> </span></span>b<span class="_ _26"> </span>l<span class="_ _26"> </span>o<span class="_ _1"> </span>c<span class="_ _26"> </span>k<span class="_ _26"> </span>I<span class="_ _1"> </span>d<span class="_ _18"> </span>.<span class="_ _1f"> </span>x<span class="_ _19"> </span>;</div><div class="t m0 x113 hd yd6e ff3 fs1 fc0 sc0 ls0 ws0">3<span class="_ _88"> </span>c<span class="_ _1f"> </span>[<span class="_ _18"> </span>t<span class="_ _17"> </span>i<span class="_ _17"> </span>d<span class="_ _18"> </span>]<span class="_ _87"> </span><span class="ff6">=<span class="_ _25"> </span></span>a<span class="_ _1f"> </span>[<span class="_ _18"> </span>t<span class="_ _17"> </span>i<span class="_ _17"> </span>d<span class="_ _1b"> </span>]<span class="_ _87"> </span><span class="ff6">+<span class="_ _20"> </span></span>b<span class="_ _17"> </span>[<span class="_ _1b"> </span>t<span class="_ _1"> </span>i<span class="_ _17"> </span>d<span class="_ _2e"> </span>]<span class="_ _17"> </span>;</div><div class="t m0 x113 h12 yd6f ff3 fs1 fc0 sc0 ls0 ws0">4<span class="_ _89"> </span><span class="ff8">}</span></div><div class="t m0 xa h2 yd70 ff2 fs1 fc0 sc0 ls0 ws0">代<span class="_ _14"></span>码<span class="ff3">8.1</span>中<span class="_ _14"></span>的的<span class="_ _55"> </span><span class="ff3">kernel<span class="_ _2c"> </span></span>代<span class="_ _14"></span>表<span class="_ _14"></span>这<span class="_ _14"></span>是<span class="_ _14"></span>一<span class="_ _14"></span>个<span class="_ _14"></span>在<span class="ff3">GPU</span>中执<span class="_ _14"></span>行<span class="_ _14"></span>的<span class="_ _14"></span>代<span class="_ _14"></span>码，<span class="_ _14"></span>我<span class="_ _14"></span>们称<span class="_ _14"></span>其<span class="_ _14"></span>为<span class="_ _14"></span>内</div><div class="t m0 x7 h2 yd71 ff2 fs1 fc0 sc0 ls0 ws0">核函<span class="_ _14"></span>数。由 <span class="ff3">k<span class="_ _16"></span>ernel<span class="_ _89"> </span><span class="ff2">标<span class="_ _14"></span>记的<span class="_ _14"></span>代码将<span class="_ _14"></span>由</span>n<span class="_ _15"></span>vcc<span class="ff2">编<span class="_ _14"></span>译器编<span class="_ _14"></span>译，而没<span class="_ _14"></span>有这个<span class="_ _14"></span>标记的<span class="_ _14"></span>函数<span class="_ _14"></span>将</span></span></div><div class="t m0 x7 h2 yd72 ff2 fs1 fc0 sc0 ls0 ws0">由<span class="ff3">C<span class="ff6">++</span></span>的<span class="_ _14"></span>编<span class="_ _14"></span>译<span class="_ _14"></span>器编<span class="_ _14"></span>译</div><div class="t m0 xd7 h10 yd73 ff3 fs9 fc0 sc0 ls0 ws0">2</div><div class="t m0 xd8 h2 yd72 ff2 fs1 fc0 sc0 ls0 ws0">。<span class="_ _14"></span>第<span class="ff3">2</span>行代<span class="_ _14"></span>表<span class="_ _14"></span>获<span class="_ _14"></span>取<span class="_ _14"></span>当<span class="_ _14"></span>前<span class="_ _14"></span>的<span class="_ _14"></span>线<span class="_ _14"></span>程<span class="_ _14"></span>号，这<span class="_ _14"></span>里<span class="_ _14"></span>我<span class="_ _14"></span>们<span class="_ _14"></span>假<span class="_ _14"></span>定<span class="_ _14"></span>线<span class="_ _14"></span>程<span class="_ _14"></span>号<span class="_ _14"></span>就<span class="_ _14"></span>是</div><div class="t m0 x7 h2 yd74 ff2 fs1 fc0 sc0 ls0 ws0">线程<span class="_ _14"></span>块<span class="_ _14"></span>的编<span class="_ _14"></span>号，即<span class="_ _14"></span>默认<span class="_ _14"></span>每个<span class="_ _14"></span>线<span class="_ _14"></span>程块<span class="_ _14"></span>只有<span class="_ _14"></span>一<span class="_ _14"></span>个线<span class="_ _14"></span>程在<span class="_ _14"></span>运行。<span class="_ _14"></span>如果<span class="_ _14"></span>每<span class="_ _14"></span>个线<span class="_ _14"></span>程块<span class="_ _14"></span>有多<span class="_ _14"></span>个</div><div class="t m0 x7 h2 yd75 ff2 fs1 fc0 sc0 ls0 ws0">个线程在执行，那么第<span class="ff3">2</span>行代码应改为</div><div class="t m0 x114 he yd76 ff5 fs1 fc0 sc0 ls0 ws0">i<span class="_ _1"> </span>n<span class="_ _26"> </span>t<span class="_ _83"> </span><span class="ff3">t<span class="_ _17"> </span>i<span class="_ _17"> </span>d<span class="_ _86"> </span><span class="ff6">=<span class="_ _87"> </span></span>t<span class="_ _1"> </span>h<span class="_ _1"> </span>r<span class="_ _1"> </span>e<span class="_ _26"> </span>a<span class="_ _1"> </span>d<span class="_ _1"> </span>I<span class="_ _1"> </span>d<span class="_ _26"> </span>x<span class="_ _1b"> </span>.<span class="_ _19"> </span>x<span class="_ _28"> </span><span class="ff6">+<span class="_ _87"> </span></span>b<span class="_ _1"> </span>l<span class="_ _26"> </span>o<span class="_ _26"> </span>c<span class="_ _1"> </span>k<span class="_ _26"> </span>I<span class="_ _26"> </span>d<span class="_ _18"> </span>.<span class="_ _19"> </span>x<span class="_ _25"> </span><span class="ff6">+<span class="_ _25"> </span></span>b<span class="_ _3"></span>l<span class="_ _3"></span>o<span class="_ _3"></span>c<span class="_ _13"></span>k<span class="_ _3"></span>D<span class="_ _13"></span>i<span class="_ _3"></span>m<span class="_ _1a"> </span>.<span class="_ _19"> </span>x<span class="_ _1f"> </span>;</span></div><div class="t m0 xa h2 yd77 ff2 fs1 fc0 sc0 ls0 ws0">观察图<span class="ff3">8-3</span>，这实质上类似于二维索引空间转换为线性空间的代码。代码<span class="ff3">8.1</span>中</div><div class="t m0 x7 h2 yba5 ff2 fs1 fc0 sc0 ls0 ws0">的<span class="_ _3"></span>第<span class="ff3">3</span>行<span class="_ _3"></span>代<span class="_ _3"></span>表<span class="_ _3"></span>每<span class="_ _13"></span>个<span class="_ _3"></span>线<span class="_ _3"></span>程<span class="_ _3"></span>执<span class="_ _3"></span>行<span class="_ _13"></span>一<span class="_ _3"></span>个<span class="_ _3"></span>操<span class="_ _3"></span>作，<span class="_ _3"></span>即<span class="_ _3"></span>将<span class="_ _3"></span>向<span class="_ _3"></span>量<span class="ff3">a</span>中<span class="_ _3"></span>的<span class="_ _13"></span>第<span class="ff3">tid</span>个<span class="_ _3"></span>元<span class="_ _3"></span>素<span class="_ _3"></span>与<span class="_ _3"></span>向<span class="_ _13"></span>量<span class="ff3">b</span>中<span class="_ _3"></span>的</div><div class="t m0 x7 h2 yd78 ff2 fs1 fc0 sc0 ls0 ws0">第<span class="ff3">tid</span>个<span class="_ _3"></span>元<span class="_ _3"></span>素<span class="_ _3"></span>相<span class="_ _3"></span>加，<span class="_ _3"></span>并<span class="_ _3"></span>存<span class="_ _3"></span>储<span class="_ _3"></span>在<span class="_ _3"></span>向<span class="_ _3"></span>量<span class="ff3">c</span>的<span class="_ _3"></span>第<span class="ff3">tid</span>个<span class="_ _13"></span>元<span class="_ _3"></span>素<span class="_ _3"></span>中。<span class="_ _3"></span>这<span class="_ _3"></span>可<span class="_ _3"></span>以<span class="_ _3"></span>理<span class="_ _3"></span>解<span class="_ _3"></span>为，<span class="_ _3"></span>代<span class="_ _3"></span>码<span class="ff3">8.1</span>会</div><div class="t m0 x7 h2 yd79 ff2 fs1 fc0 sc0 ls0 ws0">做<span class="_ _14"></span>为<span class="_ _12"></span>一<span class="_ _12"></span>个<span class="_ _12"></span>副<span class="_ _12"></span>本<span class="_ _12"></span>分<span class="_ _12"></span>发<span class="_ _12"></span>给<span class="_ _12"></span>各<span class="_ _12"></span>个<span class="_ _12"></span>线<span class="_ _12"></span>程，<span class="_ _14"></span>各<span class="_ _12"></span>个<span class="_ _12"></span>线<span class="_ _12"></span>程<span class="_ _12"></span>拿<span class="_ _12"></span>到<span class="_ _12"></span>这<span class="_ _12"></span>段<span class="_ _12"></span>代<span class="_ _12"></span>码<span class="_ _12"></span>后，<span class="_ _14"></span>根<span class="_ _12"></span>据<span class="_ _12"></span>自<span class="_ _12"></span>己<span class="_ _12"></span>的<span class="_ _12"></span>线<span class="_ _12"></span>程<span class="ff3">ID</span></div><div class="t m0 xed h2 yd7a ff2 fs1 fc0 sc0 ls0 ws0">（即<span class="ff3">tid</span>）执行向量<span class="ff3">a</span>和向量<span class="ff3">b</span>中的第<span class="ff3">tid</span>的元素的操作。</div><div class="t m0 x7 h65 yd7b ff3 fs8 fc0 sc0 ls0 ws0">8.2<span class="_ _28"> </span>CUD<span class="_ _15"></span>A</div><div class="t m0 xa h2 y9f4 ff3 fs1 fc0 sc0 ls0 ws0">CUD<span class="_ _15"></span>A<span class="ff2">（</span>Compute<span class="_ _1a"> </span>Uniﬁed<span class="_ _1a"> </span>Device<span class="_ _19"> </span>Architecture<span class="ff2">）是</span>NVIDIA<span class="ff2">公司在</span>2007<span class="ff2">年推出的</span></div><div class="t m0 x7 h2 yd7c ff2 fs1 fc0 sc0 ls0 ws0">高性<span class="_ _14"></span>能<span class="_ _14"></span>运算<span class="_ _14"></span>平<span class="_ _14"></span>台，它<span class="_ _14"></span>可以<span class="_ _14"></span>让<span class="ff3">GPU</span>在执<span class="_ _14"></span>行<span class="_ _14"></span>常规<span class="_ _14"></span>的图<span class="_ _14"></span>形<span class="_ _14"></span>渲染<span class="_ _14"></span>的<span class="_ _14"></span>基础<span class="_ _14"></span>上额<span class="_ _14"></span>外<span class="_ _14"></span>地实<span class="_ _14"></span>现高<span class="_ _14"></span>性</div><div class="t m0 x7 h2 yd7d ff2 fs1 fc0 sc0 ls0 ws0">能<span class="_ _14"></span>的<span class="_ _12"></span>通<span class="_ _14"></span>用<span class="_ _12"></span>并<span class="_ _14"></span>行<span class="_ _12"></span>计<span class="_ _12"></span>算。<span class="_ _14"></span><span class="ff3">CUD<span class="_ _15"></span>A<span class="ff2">包<span class="_ _12"></span>含<span class="_ _12"></span>了</span>CUD<span class="_ _15"></span>A<span class="ff2">指<span class="_ _12"></span>令<span class="_ _12"></span>集<span class="_ _14"></span>架<span class="_ _12"></span>构<span class="_ _14"></span>以<span class="_ _12"></span>及</span>GPU<span class="ff2">内<span class="_ _14"></span>部<span class="_ _12"></span>的<span class="_ _12"></span>并<span class="_ _14"></span>行<span class="_ _12"></span>计<span class="_ _14"></span>算<span class="_ _12"></span>引</span></span></div><div class="t m0 x7 h2 yd7e ff2 fs1 fc0 sc0 ls0 ws0">擎，通<span class="_ _14"></span>过<span class="_ _14"></span>利<span class="_ _14"></span>用<span class="ff3">GPU<span class="_ _1c"> </span></span>的处<span class="_ _14"></span>理<span class="_ _14"></span>能<span class="_ _14"></span>力，可<span class="_ _14"></span>大<span class="_ _14"></span>幅<span class="_ _14"></span>提升<span class="_ _14"></span>计<span class="_ _14"></span>算<span class="_ _14"></span>性<span class="_ _14"></span>能。支<span class="_ _14"></span>持<span class="ff3">CUD<span class="_ _16"></span>A<span class="ff2">平<span class="_ _14"></span>台的</span>GPU<span class="ff2">包</span></span></div><div class="t m0 x7 h2 yd7f ff2 fs1 fc0 sc0 ls0 ws0">括<span class="ff3">NVIDIA<span class="_ _1a"> </span>T<span class="_ _5"></span>esla<span class="_ _1a"> </span><span class="ff2">、<span class="_ _14"></span></span>NVIDIA<span class="_ _1a"> </span>Quadro<span class="_ _1a"> </span><span class="ff2">以及</span>NVIDIA<span class="_ _1a"> </span>GeForce<span class="ff2">多个系<span class="_ _14"></span>列，其价格<span class="_ _14"></span>也涵盖</span></span></div><div class="t m0 x7 h2 yd80 ff2 fs1 fc0 sc0 ls0 ws0">了<span class="_ _12"></span>高<span class="_ _3"></span>端<span class="_ _12"></span>到<span class="_ _12"></span>底<span class="_ _3"></span>端<span class="_ _12"></span>多<span class="_ _3"></span>个<span class="_ _12"></span>市<span class="_ _3"></span>场，<span class="_ _14"></span>使<span class="_ _3"></span>得<span class="ff3">CUD<span class="_ _15"></span>A<span class="ff2">能<span class="_ _3"></span>够<span class="_ _12"></span>满<span class="_ _3"></span>足<span class="_ _12"></span>从<span class="_ _3"></span>消<span class="_ _12"></span>费<span class="_ _12"></span>级<span class="_ _3"></span>到<span class="_ _12"></span>专<span class="_ _3"></span>业<span class="_ _12"></span>级<span class="_ _3"></span>等<span class="_ _12"></span>多<span class="_ _3"></span>个<span class="_ _12"></span>方<span class="_ _12"></span>面<span class="_ _3"></span>的</span></span></div><div class="t m0 x28 h22 yd81 ff3 fsc fc0 sc0 ls0 ws0">2</div><div class="t m0 x90 h2f yd82 ff2 fse fc0 sc0 ls0 ws0">例如<span class="ff3">W<span class="_ _16"></span>indows<span class="ff2">操作系统下的</span>msvc<span class="ff2">或</span>Linux<span class="ff2">操作系统下的</span>gcc</span></div><div class="t m0 x11 hb y1a ff3 fs6 fc0 sc0 ls0 ws0">-<span class="_ _17"> </span>85<span class="_ _17"> </span>-</div><a class="l" href="#pf5d" data-dest-detail='[93,"XYZ",101.23,136.86,null]'><div class="d m1" style="border-width:1.000000px;border-style:solid;border-color:rgb(255,0,0);position:absolute;left:193.100000px;bottom:480.841000px;width:2.985000px;height:4.380000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf5c" data-dest-detail='[92,"XYZ",85.04,203.62,null]'><div class="d m1" style="border-width:1.000000px;border-style:solid;border-color:rgb(255,0,0);position:absolute;left:144.315000px;bottom:382.550000px;width:14.936000px;height:7.213000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
